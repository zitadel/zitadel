{
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "targets": {
    "nx-release-publish": {
      "description": "Sets the package name to the GitHub org scope for publishing to GitHub Packages. This allows to publish the package on forks.",
      "dependsOn": [
        "generate"
      ],
      "executor": "nx:run-commands",
      "options": {
        "cwd": "{projectRoot}",
        "command": "npm pkg set name=\"@${ZITADEL_RELEASE_GITHUB_ORG}/proto\" repository=\"https://github.com/${ZITADEL_RELEASE_GITHUB_REPO}\""
      }
    },
    "generate": {
      "inputs": [
        "default",
        "{workspaceRoot}/pnpm-lock.yaml",
        "{workspaceRoot}/proto/**/*"
      ],
      "outputs": [
        "{projectRoot}/cjs",
        "{projectRoot}/es",
        "{projectRoot}/types"
      ]
    }
  }
}
