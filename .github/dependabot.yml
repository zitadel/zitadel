version: 2
updates:
  # ── Go modules ────────────────────────────────────────────────────────────
  - package-ecosystem: gomod
    directory: "/"
    schedule:
      interval: monthly
      day: monday
      time: "02:00"
    groups:
      go-version-updates:
        applies-to: version-updates
        patterns: ["*"]
        update-types: ["minor", "patch"]
      go-security-updates:
        applies-to: security-updates
        patterns: ["*"]
    labels: ["gomod", "dependencies"]
    commit-message:
      prefix: chore
      include: scope

  # ── npm: console, e2e, login, docs (consolidated) ─────────────────────────
  - package-ecosystem: npm
    directories:
      - "/console"
      - "/e2e"
      - "/login"
      - "/apps/docs"
    schedule:
      interval: monthly
      day: monday
      time: "02:00"
    groups:
      npm-version-updates:
        applies-to: version-updates
        patterns: ["*"]
        update-types: ["minor", "patch"]
      npm-security-updates:
        applies-to: security-updates
        patterns: ["*"]
    ignore:
      - dependency-name: "eslint"
        versions: ["9.x"]
    labels: ["npm", "dependencies"]
    commit-message:
      prefix: chore
      include: scope

  # ── Docker: build ─────────────────────────────────────────────────────────
  - package-ecosystem: docker
    directory: "/build"
    schedule:
      interval: monthly
      day: monday
      time: "02:00"
    groups:
      docker-version-updates:
        applies-to: version-updates
        patterns: ["*"]
        update-types: ["minor", "patch"]
      docker-security-updates:
        applies-to: security-updates
        patterns: ["*"]
    labels: ["dependencies"]
    commit-message:
      prefix: chore
      include: scope

  # ── Docker: devcontainer ──────────────────────────────────────────────────
  - package-ecosystem: docker
    directory: "/.devcontainer"
    schedule:
      interval: monthly
      day: monday
      time: "02:00"
    groups:
      devcontainer-version-updates:
        applies-to: version-updates
        patterns: ["*"]
        update-types: ["minor", "patch"]
      devcontainer-security-updates:
        applies-to: security-updates
        patterns: ["*"]
    labels: ["dependencies"]
    commit-message:
      prefix: chore
      include: scope

  # ── GitHub Actions ────────────────────────────────────────────────────────
  - package-ecosystem: github-actions
    directory: "/"
    schedule:
      interval: monthly
      day: monday
      time: "02:00"
    groups:
      actions-version-updates:
        applies-to: version-updates
        patterns: ["*"]
      actions-security-updates:
        applies-to: security-updates
        patterns: ["*"]
    labels: ["dependencies"]
    commit-message:
      prefix: chore
      include: scope
