{
  "$schema": "../node_modules/nx/schemas/project-schema.json",
  "targets": {
    "ensure-plugins": {
      "description": "Downloads the connectRPC plugin to generate OpenAPI documentation from protobuf definitions",
      "inputs": [
        "{projectRoot}/plugin-download.sh"
      ],
      "outputs": [
        "{projectRoot}/protoc-gen-connect-openapi/protoc-gen-connect-openapi"
      ],
      "cache": true
    },
    "generate-grpc": {
      "description": "Generates OpenAPI specifications from protobuf definitions for API endpoints",
      "dependsOn": [
        "ensure-plugins"
      ],
      "outputs": [
        "{projectRoot}/.artifacts/openapi",
        "{projectRoot}/.artifacts/openapi3"
      ],
      "cache": true
    },
    "generate-apidocs": {
      "description": "Generates API documentation from OpenAPI specifications for API endpoints",
      "dependsOn": [
        "generate-grpc"
      ],
      "outputs": [
        "{projectRoot}/docs/api"
      ],
      "cache": true
    },
    "generate-configdocs": {
      "description": "Copies default configuration files and setup steps to the documentation site",
      "inputs": [
        "{workspaceRoot}/cmd/defaults.yaml",
        "{workspaceRoot}/cmd/setup/steps.yaml"
      ],
      "outputs": [
        "{projectRoot}/docs/self-hosting/manage/configure/defaults.yaml",
        "{projectRoot}/docs/self-hosting/manage/configure/steps.yaml"
      ],
      "cache": true
    },
    "generate": {
      "description": "Runs all documentation generation targets",
      "dependsOn": [
        "generate-apidocs",
        "generate-configdocs"
      ]
    },
    "build": {
      "description": "Builds the documentation site using Docusaurus",
      "outputs": [
        "{projectRoot}/build"
      ]
    },
    "prod": {
      "description": "Runs the documentation site in production mode",
      "continuous": true,
      "dependsOn": [
        "build"
      ]
    },
    "dev": {
      "description": "Runs the documentation site in development mode with hot-reloading",
      "continuous": true,
      "dependsOn": [
        "generate"
      ]
    }
  }
}
