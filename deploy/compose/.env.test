# Test environment for NX smoke tests.
# Used with docker-compose.test.yml overlay to run locally-built images.
# Do NOT use for production deployments.

ZITADEL_DOMAIN=localhost
PROXY_HTTP_PUBLISHED_PORT=8080
ZITADEL_EXTERNALPORT=8080
ZITADEL_EXTERNALSECURE=false
ZITADEL_PUBLIC_SCHEME=http

ZITADEL_LOGIN_BASE_URI=http://localhost:8080/ui/v2/login/
ZITADEL_OIDC_DEFAULTLOGINURLV2=http://localhost:8080/ui/v2/login/login?authRequest=
ZITADEL_OIDC_DEFAULTLOGOUTURLV2=http://localhost:8080/ui/v2/login/logout?post_logout_redirect=
ZITADEL_SAML_DEFAULTLOGINURLV2=http://localhost:8080/ui/v2/login/login?samlRequest=

ZITADEL_MASTERKEY=MasterkeyNeedsToHave32Characters
LOGIN_CLIENT_PAT_EXPIRATION=2099-01-01T00:00:00Z

# Suppresses interpolation warnings from the base compose file.
# The actual image tags for zitadel-api and zitadel-login are overridden
# by docker-compose.test.yml to use locally-built :local tags.
ZITADEL_VERSION=local

# Images for services not overridden by docker-compose.test.yml
TRAEFIK_IMAGE=traefik:v3.6.8
POSTGRES_IMAGE=postgres:17.2-alpine
REDIS_IMAGE=redis:7.4.2-alpine
OTEL_COLLECTOR_IMAGE=otel/opentelemetry-collector-contrib:0.114.0
JAEGER_IMAGE=jaegertracing/all-in-one:1.62.0
JAEGER_UI_PUBLISHED_PORT=16686

# Traefik
TRAEFIK_DASHBOARD_ENABLED=false
TRAEFIK_LOG_LEVEL=ERROR
TRAEFIK_ACCESSLOG_ENABLED=false

# Postgres
POSTGRES_DB=zitadel
POSTGRES_ADMIN_USER=postgres
POSTGRES_ADMIN_PASSWORD=postgres
POSTGRES_ZITADEL_USER=zitadel
POSTGRES_ZITADEL_PASSWORD=zitadel

# Disable access logs to reduce noise in test output
ZITADEL_ACCESS_LOG_STDOUT_ENABLED=false

# Tracing disabled
ZITADEL_INSTRUMENTATION_SERVICENAME=zitadel-api
ZITADEL_INSTRUMENTATION_TRACE_EXPORTER_TYPE=none
ZITADEL_INSTRUMENTATION_TRACE_EXPORTER_ENDPOINT=
ZITADEL_INSTRUMENTATION_TRACE_EXPORTER_INSECURE=false

# Cache disabled (no Redis profile)
ZITADEL_CACHES_CONNECTORS_REDIS_ENABLED=false
ZITADEL_CACHES_CONNECTORS_REDIS_ADDR=redis:6379
ZITADEL_CACHES_CONNECTORS_REDIS_USERNAME=
ZITADEL_CACHES_CONNECTORS_REDIS_PASSWORD=
ZITADEL_CACHES_INSTANCE_CONNECTOR=
ZITADEL_CACHES_MILESTONES_CONNECTOR=
ZITADEL_CACHES_ORGANIZATION_CONNECTOR=

# Login OTEL disabled
LOGIN_OTEL_SERVICE_NAME=zitadel-login
LOGIN_OTEL_EXPORTER_OTLP_ENDPOINT=
LOGIN_OTEL_EXPORTER_OTLP_PROTOCOL=grpc
