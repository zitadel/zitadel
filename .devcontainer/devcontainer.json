{
	"$schema": "https://raw.githubusercontent.com/devcontainers/spec/refs/heads/main/schemas/devContainer.schema.json",
	"name": "Zitadel Devcontainer",
	"dockerComposeFile": "docker-compose.yaml",
	"service": "devcontainer",
	"workspaceFolder": "/workspaces/zitadel",
	"forwardPorts": [
		3000,
		4200,
		8080,
		3100
	],
	"portsAttributes": {
		"3000": {
			"label": "Login",
			"onAutoForward": "notify"
		},
		"4200": {
			"label": "Console",
			"onAutoForward": "notify"
		},
		"8080": {
			"label": "API",
			"onAutoForward": "notify"
		},
		"3100": {
			"label": "Docs",
			"onAutoForward": "notify"
		}
	},
	"updateContentCommand": {
		"goModules": "go mod download || true",
		"nodeModules": "pnpm install || true && pnpm add -g nx || true && cd apps/login && pnpm cypress install || true"
	},
	"features": {
		"ghcr.io/devcontainers/features/go:1": {
			"version": "1.24"
		},
		"ghcr.io/guiyomh/features/golangci-lint:0": {},
		"ghcr.io/jungaretti/features/make:1": {},
		"ghcr.io/devcontainers/features/docker-outside-of-docker": {},
		"ghcr.io/devcontainers-extra/features/pnpm:2": {
			"version": "10.13.1"
		}
	},
	"customizations": {
        "vscode": {
            "extensions": [
                "golang.Go",
				"nrwl.angular-console"
            ]
        }
    }
}