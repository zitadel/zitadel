<cnsl-create-layout title="{{ 'APP.PAGES.CREATE' | translate }}" (closed)="close()">
  <div class="app-create-wrapper">
    <div class="app-create-main-content">
      <div class="content-wrapper">
        <div class="content-title-area">
          <h1>{{ 'APP.PAGES.QUICK_CREATE_FRAMEWORK' | translate }}</h1>
          <p>{{ 'APP.PAGES.QUICK_CREATE_FRAMEWORK_DESC' | translate }}</p>
        </div>

        <div>
          <div class="framework-wrapper">
            <ng-container *ngFor="let framework of frameworks.slice(0, 18)">
              <button
                (click)="selectFrameworkForPreview(framework)"
                class="framework-card card"
                [class.selected]="selectedFramework()?.id === framework.id"
                title="{{ framework.title }}"
              >
                <img *ngIf="themeService.isDarkTheme | async" [src]="framework.imgSrcDark" alt="{{ framework.title }}" />
                <img
                  *ngIf="(themeService.isDarkTheme | async) === false && framework.imgSrcLight"
                  [src]="framework.imgSrcLight"
                  alt="{{ framework.title }}"
                />
                <p class="framework-title">{{ framework.title }}</p>
              </button>
            </ng-container>
          </div>

          <!-- Checkbox for auto-creating project -->
          <div class="create-project-checkbox">
            <mat-checkbox [(ngModel)]="createProject" color="primary">
              {{ 'APP.PAGES.CREATE_PROJECT_AUTO' | translate }}
            </mat-checkbox>
            <p class="checkbox-description">{{ 'APP.PAGES.CREATE_PROJECT_AUTO_DESC' | translate }}</p>
          </div>

          <!-- Project selector (shown when checkbox is unchecked) -->
          <div *ngIf="!createProject" class="project-selector">
            <h3>{{ 'APP.PAGES.CREATE_SELECT_PROJECT' | translate }}</h3>
            <p class="hint">{{ 'APP.PAGES.CREATE_NEW_PROJECT' | translate }}</p>
            <cnsl-search-project-autocomplete
              class="block"
              [autocompleteType]="ProjectAutocompleteType.PROJECT_OWNED"
              (selectionChanged)="selectProject($any($event))"
              (valueChanged)="projectName = $any($event)"
            >
            </cnsl-search-project-autocomplete>
          </div>
        </div>
      </div>

      <cnsl-info-section *ngIf="error()" [type]="InfoSectionType.WARN"
        ><span class="error-msg">{{ error() }}</span></cnsl-info-section
      >
    </div>
    <div class="framework-details-panel" *ngIf="selectedFramework()">
      <div class="panel-header">
        <div class="panel-title-section">
          <img
            class="framework-logo"
            *ngIf="themeService.isDarkTheme | async"
            [src]="selectedFramework()!.imgSrcDark"
            alt="{{ selectedFramework()!.title }}"
          />
          <img
            class="framework-logo"
            *ngIf="(themeService.isDarkTheme | async) === false && selectedFramework()!.imgSrcLight"
            [src]="selectedFramework()!.imgSrcLight"
            alt="{{ selectedFramework()!.title }}"
          />
          <h2>{{ selectedFramework()!.title }}</h2>
        </div>
        <button mat-icon-button (click)="selectedFramework.set(undefined)">
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <div class="panel-content">
        <div class="detail-section" *ngIf="selectedFramework()!.ecosystem">
          <cnsl-info-section> We will create your project and all necessary configurations for you. </cnsl-info-section>
        </div>
        <div class="detail-section" *ngIf="selectedFramework()!.ecosystem">
          <h3>Ecosystem</h3>
          <p>{{ selectedFramework()!.ecosystem }}</p>
        </div>

        <div class="detail-section" *ngIf="selectedFramework()!.description">
          <h3>Description</h3>
          <p>{{ selectedFramework()!.description }}</p>
        </div>

        <div class="detail-section" *ngIf="getAppTypeLabel(selectedFramework()!.id)">
          <h3>Application Type</h3>
          <p>{{ getAppTypeLabel(selectedFramework()!.id) }}</p>
        </div>

        <div class="detail-section" *ngIf="getAuthMethod(selectedFramework()!.id)">
          <h3>Authentication</h3>
          <p>{{ getAuthMethod(selectedFramework()!.id) }}</p>
        </div>

        <div class="detail-section" *ngIf="selectedFramework()!.docsLink">
          <h3>Documentation</h3>
          <a [href]="selectedFramework()!.docsLink" target="_blank" rel="noopener noreferrer">
            View Documentation <mat-icon inline>open_in_new</mat-icon>
          </a>
        </div>
      </div>

      <div class="panel-actions">
        <button mat-stroked-button (click)="selectedFramework.set(undefined)">Cancel</button>
        <button color="primary" mat-raised-button (click)="createProjectAndContinue(selectedFramework()!.id)">
          Continue with {{ selectedFramework()!.title }}
        </button>
      </div>
    </div>
  </div>
</cnsl-create-layout>
