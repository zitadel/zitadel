<div class="form-array-list">
  <div class="form-field-list">
    <div class="list-header-wrapper">
      <p class="list-header cnsl-secondary-text">{{ title }}*</p>
      <button
        class="add-element-btn"
        matTooltip="{{ 'ACTIONS.ADD' | translate }}"
        type="button"
        mat-icon-button
        (click)="addArrayEntry()"
        >
        <mat-icon>add</mat-icon>
      </button>
    </div>
    @for (formControl of formArray.controls; track formControl; let i = $index) {
      <div class="element-row">
        <cnsl-form-field class="formfield" [hideRequiredMarker]="true">
          <input cnslInput title="{{ 'IDP.SERVERS' | translate }}" [formControl]="$any(formControl)" required />
        </cnsl-form-field>
        <button
          class="add-element-btn"
          [disabled]="i === 0 && formArray.controls.length === 1 && formControl.value === ''"
          [matTooltip]="
            i === 0 && formArray.controls.length === 1 ? ('ACTIONS.CLEAR' | translate) : ('ACTIONS.REMOVE' | translate)
          "
          type="button"
          mat-icon-button
          color="warn"
          (click)="i === 0 && formArray.controls.length === 1 ? clearEntryAtIndex(i) : removeEntryAtIndex(i)"
          >
          @if (i === 0 && formArray.controls.length === 1) {
            <i class="las la-times-circle"></i>
          } @else {
            <i class="las la-minus-circle"></i>
          }
        </button>
      </div>
    }
    @if (control.touched && control.errors && control.errors['errorsatleastone']) {
      <span class="control-error">{{
        control.errors['errorsatleastone'].i18nKey | translate
      }}</span>
    }
  </div>
</div>
