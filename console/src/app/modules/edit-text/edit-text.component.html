@if (currentMap) {
  <div>
    <form [formGroup]="form">
      @for (key of current$ | async | keyvalue; track key) {
        @if (key.key !== 'isDefault') {
          <div class="edit-text-block">
            @if (default$ | async; as defaultmap) {
              <div class="edit-text-flex">
                <cnsl-form-field class="edit-text-formfield">
                  <cnsl-label>{{ key.key }}</cnsl-label>
                  <textarea
                    class="edit-text-area"
                    cnslInput
                    [formControlName]="key.key"
                    [placeholder]="$any(defaultmap[key.key])"
                    [name]="key.key"
                    [ngClass]="{ defaulttext: form.get(key.key)?.value === '' }"
                  ></textarea>
                  @if (warnText[key.key] === undefined) {
                    <div class="edit-text-chips">
                      @for (chip of chips; track chip) {
                        <div
                          class="chip"
                          cnslCopyToClipboard
                          [valueToCopy]="chip.value"
                          (copiedValue)="copied = $event"
                          (click)="addChip(key.key, chip.value)"
                          >
                          <span class="key">{{ chip.key | translate }}</span>
                          <span class="value">{{ chip.value }}</span>
                          @if (copied !== chip.value) {
                            <i class="las la-clipboard"></i>
                          }
                          @if (copied === chip.value) {
                            <i class="las la-clipboard-check"></i>
                          }
                        </div>
                      }
                    </div>
                  }
                </cnsl-form-field>
                <div class="edit-text-actions">
                  <button
                    matTooltip="{{ 'ACTIONS.RESETDEFAULT' | translate }}"
                    mat-icon-button
                    [disabled]="form.get(key.key)?.value === defaultmap[key.key] || disabled"
                    (click)="form.get(key.key)?.setValue(defaultmap[key.key])"
              (mouseenter)="
                form.get(key.key)?.value !== defaultmap[key.key] && setWarnText(key.key, $any(defaultmap[key.key]))
              "
                    (mouseleave)="setWarnText(key.key, undefined)"
                    >
                    <i class="las la-history"></i>
                  </button>
                  <button
                    matTooltip="{{ 'ACTIONS.RESETCURRENT' | translate }}"
                    mat-icon-button
                    [disabled]="form.get(key.key)?.value === currentMap[key.key] || disabled"
                    (click)="form.get(key.key)?.setValue(currentMap[key.key])"
              (mouseenter)="
                form.get(key.key)?.value !== currentMap[key.key] && setWarnText(key.key, $any(currentMap[key.key]))
              "
                    (mouseleave)="setWarnText(key.key, undefined)"
                    >
                    <i class="las la-undo"></i>
                  </button>
                </div>
              </div>
            }
          </div>
        }
        @if (warnText[key.key] !== undefined) {
          <cnsl-info-section class="edit-text-info" [type]="InfoSectionType.WARN">
            {{ 'ACTIONS.RESETTO' | translate }} <cite>'{{ warnText[key.key] }}'</cite></cnsl-info-section
            >
          }
        }
      </form>
    </div>
  }
