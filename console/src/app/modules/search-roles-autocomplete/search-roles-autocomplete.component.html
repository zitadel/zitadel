<form>
  <cnsl-form-field class="full-width">
    <cnsl-label>Role Name</cnsl-label>
    @if (singleOutput) {
      <input
        cnslInput
        type="text"
        placeholder="Search for the role name"
        #nameInput
        [formControl]="myControl"
        [matAutocomplete]="auto"
        />
    }

    @if (!singleOutput) {
      <mat-chip-grid #chipList aria-label="name selection">
        @for (selectedRole of roles; track selectedRole) {
          <mat-chip-row class="chip" [removable]="removable" (removed)="remove(selectedRole)">
            {{ selectedRole.displayName }}
            @if (removable) {
              <mat-icon matChipRemove>cancel</mat-icon>
            }
          </mat-chip-row>
        }
        <input
          cnslInput
          placeholder="Role Name"
          #nameInput
          [formControl]="myControl"
          [matAutocomplete]="auto"
          [matChipInputFor]="chipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          [matChipInputAddOnBlur]="addOnBlur"
          (matChipInputTokenEnd)="add($event)"
          />
      </mat-chip-grid>
    }

    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)" [displayWith]="displayFn">
      @if (isLoading) {
        <mat-option class="is-loading">
          <mat-spinner diameter="30"></mat-spinner>
        </mat-option>
      }
      @for (role of filteredRoles; track role) {
        <mat-option [value]="role.key">
          {{ role.displayName }}
        </mat-option>
      }
    </mat-autocomplete>
  </cnsl-form-field>
</form>
